## 🔍성능 최적화를 진행 한 이유

- 실제 사용자의 40%가 3초 동안 기다리게 된다면 사이트를 이탈하는것으로 나타난다.
- 또한 페이지의 속도를 통한 수익의 증가한다는 사실
- FE쪽에서 비동기 통신과 복잡한 UI등으로 인해 프론트엔드에 대한 성능도 중요하기 때문입니다.

---

### LightHouse란?

- 웹사이트의 성능을 측정하고 개선 방향을 제시해주는 자동화 툴
- 개선 가이드를 통해 어떤 부분을 중점으로 최적화 해야하는지 알수있습니다.

---

### 최적화를 위한 용어들

**Largest Contentful Paing(LCP)**
페이지에서 가장 큰 콘텐츠를 로드하는데 걸리는 시간 (기준 2.5초 이내)

**Cumulative Layout Shift(CLS)**
레이아웃 변경 횟수, 레이아웃이 많이 변경되면 그만큼 오래걸린다.

**Interaction to Next Paint(INP)**
상호작용을 할때 다음 페이지가 로드되는 시간

**First Contentful Paint(FCP)**
첫 패아자가 로드되는데 걸리는 시간

**Total Blocking Time(TBT)**
웹 페이지가 사용자와 상호작용을 할 수 없는 시간, 사용자가 상호작용을 시도할때, 기존 스레드가 차단된 총 시간을 측정한다.

---

### 경험

**최적화 전**
![image](https://github.com/user-attachments/assets/6757da98-82b0-49ae-a5cf-3a2901968486)

**최적화 후**
![image](https://github.com/user-attachments/assets/4f6dc1dd-0fb8-4d0d-a3f2-c737d203746f)

---

### Font Preload

이 방법을 사용하면 로컬 폰트가 존재하면 기기에 이미 설치되어 있는 폰트 파일을 사용하다 로딩이 다 되면 페이지의 폰트로 보여줍니다.
❗️주의점 : fallback font가 웹 폰트와 비슷하지 않으면 화면 전환때 크게 일어날수있는 문제가 생길수 있어서 주의해야합니다.

font-display : swap 사용

**💡개선**
위에 문제는 FCP에 영향을 주었습니다. 브라우저가 첫 번째 DOM의 콘텐츠를 랜더링하는데 걸리는 시간을 줄여줄수있었습니다.

**추가 내용**
추가로 저용량 순으로 Font format을 사용하면 좋겠다 생각했습니다.
모든 브라우저에 지원되는 font format은 TTE, WOFF, WOFF2이 있습니다.
[용량 큰 font] WOFF2 -> WOFF -> EOT -> TTF [용량 작은 font]
작은 순서부터 폰트 적용을 한다면 웹 폰트 최적화에 대한 부분에서 완성도가 올라갈거같습니다.
하지만 브라우저마다 지원을 안하는 폰트도 존재한 미리 찾아보고 하는것이 좋습니다.

### CLS 개선

**개선할 부분** => 이미지 요소에 width 및 height를 명시하지 않았음

이 문제를 개선하기 위해서는 이것의 동작을 한번 확인해보겠습니다.

1. 브라우저가 HTML파일을 다운로드 합니다.
2. 이미지 요소를 찾고 이와 관련된 스타일을 찾습니다.
3. 이미지 요소를 랜더링하지만 높이를 알지 못하므로 높이를 0px로 지정합니다.
4. 이미지를 요청하고 1600px \* 900px확인하고 해당 정보를 사용하여 16:9의 종횡비를 생성합니다.
5. 이전에 찾은 이미지 요소를 확인하고 계산된 너비를 살펴보고 종횡비를 적용하여 높이를 계산합니다.

**결론 : ** 모든 imgdml width와 heigth 지정

**💡개선**
위에 문제는 CLS에 영향을 주는 문제였습니다. 웹페이지 로드 과정에서 레이아웃의 이동을 줄여줄수있었습니다.

### 웹 접근성

1. Button 접근 가능한 이름 지정
2. Img alt
